<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nellie Bly - Music</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 0;
            padding-bottom: 100px; /* Space for the sticky player */
        }
        .album {
            margin-bottom: 50px;
        }
        .album img {
            width: 300px;
            height: auto;
            display: block;
            margin: 0 auto;
        }
        .track {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 5px 0;
        }
        .track button {
            margin-right: 10px;
        }
        /* Sticky player styles */
        .sticky-player {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: #f1f1f1;
            border-top: 1px solid #ccc;
            padding: 10px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 -2px 5px rgba(0,0,0,0.1);
        }
        .sticky-player button, .sticky-player input[type="range"] {
            margin-right: 10px;
        }
        .sticky-player img {
            width: 50px;
            height: 50px;
            object-fit: cover;
            margin-right: 10px;
        }
        .sticky-player .controls {
            display: flex;
            align-items: center;
        }
        .sticky-player .track-info {
            display: flex;
            align-items: center;
            flex: 1;
        }
    </style>
</head>
<body>
    <h1>Nellie Bly - Music</h1>
    
    <div class="album">
        <img src="assets/artwork/unfamiliarity.jpg" alt="Unfamiliarity Album Cover">
        <a href="assets/music/03-unfamiliarity/unfamiliarity.zip" download>Download Full EP</a>
        <div>
            <div class="track"><button onclick="playTrack('assets/music/03-unfamiliarity/01-outlier.mp3', this, 'assets/artwork/unfamiliarity.jpg')">‚ñ∂</button> 01 Outlier <a href="assets/music/03-unfamiliarity/01-outlier.mp3" download>‚¨á</a></div>
            <div class="track"><button onclick="playTrack('assets/music/03-unfamiliarity/02-nothing-could-be-something.mp3', this, 'assets/artwork/unfamiliarity.jpg')">‚ñ∂</button> 02 Nothing Could Be Something <a href="assets/music/03-unfamiliarity/02-nothing-could-be-something.mp3" download>‚¨á</a></div>
            <div class="track"><button onclick="playTrack('assets/music/03-unfamiliarity/03-holding-hands-through-rubber-gloves.mp3', this, 'assets/artwork/unfamiliarity.jpg')">‚ñ∂</button> 03 Holding Hands Through Rubber Gloves <a href="assets/music/03-unfamiliarity/03-holding-hands-through-rubber-gloves.mp3" download>‚¨á</a></div>
            <div class="track"><button onclick="playTrack('assets/music/03-unfamiliarity/04-lenny-your-shoes-are-too-small.mp3', this, 'assets/artwork/unfamiliarity.jpg')">‚ñ∂</button> 04 Lenny, Your Shoes Are Too Small <a href="assets/music/03-unfamiliarity/04-lenny-your-shoes-are-too-small.mp3" download>‚¨á</a></div>
            <div class="track"><button onclick="playTrack('assets/music/03-unfamiliarity/05-text-about-the-weekend.mp3', this, 'assets/artwork/unfamiliarity.jpg')">‚ñ∂</button> 05 Text About The Weekend <a href="assets/music/03-unfamiliarity/05-text-about-the-weekend.mp3" download>‚¨á</a></div>
            <div class="track"><button onclick="playTrack('assets/music/03-unfamiliarity/06-i-hate-you-but-happy-birthday.mp3', this, 'assets/artwork/unfamiliarity.jpg')">‚ñ∂</button> 06 I Hate You, But Happy Birthday <a href="assets/music/03-unfamiliarity/06-i-hate-you-but-happy-birthday.mp3" download>‚¨á</a></div>
            <div class="track"><button onclick="playTrack('assets/music/03-unfamiliarity/07-i-hope-you-think-of-me.mp3', this, 'assets/artwork/unfamiliarity.jpg')">‚ñ∂</button> 07 I Hope You Think Of Me <a href="assets/music/03-unfamiliarity/07-i-hope-you-think-of-me.mp3" download>‚¨á</a></div>
        </div>
    </div>

    <!-- Sticky Music Player -->
    <div class="sticky-player">
        <div class="track-info">
            <img id="trackArtwork" src="" alt="Artwork" hidden>
            <span id="trackTitle">No track playing</span>
        </div>
        <div class="controls">
            <button id="prevBtn">‚èÆ</button>
            <button id="playPauseBtn">‚ñ∂</button>
            <button id="nextBtn">‚è≠</button>
            <input type="range" id="progress" value="0" min="0" max="100">
            <span id="currentTime">0:00</span> / <span id="duration">0:00</span>
            <input type="range" id="volume" min="0" max="1" step="0.01" value="1">
            <button id="shuffleBtn">üîÄ</button>
            <button id="repeatBtn">üîÅ</button>
        </div>
    </div>

    <script>
        let currentAudio = null;
        let currentButton = null;
        let trackList = [];
        let currentTrackIndex = -1;
        let isShuffle = false;
        let isRepeat = false;

        const playPauseBtn = document.getElementById('playPauseBtn');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const shuffleBtn = document.getElementById('shuffleBtn');
        const repeatBtn = document.getElementById('repeatBtn');
        const trackTitle = document.getElementById('trackTitle');
        const trackArtwork = document.getElementById('trackArtwork');
        const progress = document.getElementById('progress');
        const currentTimeEl = document.getElementById('currentTime');
        const durationEl = document.getElementById('duration');
        const volume = document.getElementById('volume');

        document.querySelectorAll('.track button').forEach((btn, index) => {
            const src = btn.getAttribute('onclick').match(/'(.*?)'/)[1];
            const artwork = btn.getAttribute('onclick').split(", '")[2].replace("')", "");
            trackList.push({ src, btn, artwork });
        });

        function playTrack(src, button, artwork) {
            currentTrackIndex = trackList.findIndex(track => track.src === src);
            if (!currentAudio) {
                currentAudio = new Audio(src);
                setupAudioEvents();
                currentAudio.play();
                updatePlayerUI(src, artwork);
                if (currentButton) currentButton.innerText = "‚ñ∂";
                currentButton = button;
                currentButton.innerText = "‚è∏";
            } else if (currentAudio.src.includes(src)) {
                if (currentAudio.paused) {
                    currentAudio.play();
                    currentButton.innerText = "‚è∏";
                    playPauseBtn.innerText = "‚è∏";
                } else {
                    currentAudio.pause();
                    currentButton.innerText = "‚ñ∂";
                    playPauseBtn.innerText = "‚ñ∂";
                }
            } else {
                currentAudio.pause();
                if (currentButton) currentButton.innerText = "‚ñ∂";
                currentAudio = new Audio(src);
                setupAudioEvents();
                currentAudio.play();
                updatePlayerUI(src, artwork);
                currentButton = button;
                currentButton.innerText = "‚è∏";
            }
        }

        function setupAudioEvents() {
            currentAudio.addEventListener('timeupdate', () => {
                progress.value = (currentAudio.currentTime / currentAudio.duration) * 100;
                currentTimeEl.innerText = formatTime(currentAudio.currentTime);
                durationEl.innerText = formatTime(currentAudio.duration);
            });

            currentAudio.addEventListener('ended', () => {
                if (isRepeat) {
                    currentAudio.currentTime = 0;
                    currentAudio.play();
                } else {
                    playNextTrack();
                }
            });

            volume.addEventListener('input', () => {
                if (currentAudio) {
                    currentAudio.volume = volume.value;
                }
            });
        }

        function updatePlayerUI(src, artwork) {
            const trackName = src.split('/').pop().replace(/-/g, ' ').replace('.mp3', '');
            trackTitle.innerText = trackName;
            playPauseBtn.innerText = "‚è∏";
            trackArtwork.src = artwork;
            trackArtwork.hidden = false;
        }

        function playNextTrack() {
            let nextIndex = isShuffle ? Math.floor(Math.random() * trackList.length) : currentTrackIndex + 1;
            if (nextIndex >= trackList.length) nextIndex = 0;
            const nextTrack = trackList[nextIndex];
            playTrack(nextTrack.src, nextTrack.btn, nextTrack.artwork);
        }

        function playPrevTrack() {
            let prevIndex = isShuffle ? Math.floor(Math.random() * trackList.length) : currentTrackIndex - 1;
            if (prevIndex < 0) prevIndex = trackList.length - 1;
            const prevTrack = trackList[prevIndex];
            playTrack(prevTrack.src, prevTrack.btn, prevTrack.artwork);
        }

        playPauseBtn.addEventListener('click', () => {
            if (currentAudio) {
                if (currentAudio.paused) {
                    currentAudio.play();
                    playPauseBtn.innerText = "‚è∏";
                    if (currentButton) currentButton.innerText = "‚è∏";
                } else {
                    currentAudio.pause();
                    playPauseBtn.innerText = "‚ñ∂";
                    if (currentButton) currentButton.innerText = "‚ñ∂";
                }
            }
        });

        prevBtn.addEventListener('click', playPrevTrack);
        nextBtn.addEventListener('click', playNextTrack);

        shuffleBtn.addEventListener('click', () => {
            isShuffle = !isShuffle;
            shuffleBtn.style.color = isShuffle ? 'blue' : 'black';
        });

        repeatBtn.addEventListener('click', () => {
            isRepeat = !isRepeat;
            repeatBtn.style.color = isRepeat ? 'blue' : 'black';
        });

        progress.addEventListener('input', () => {
            if (currentAudio) {
                currentAudio.currentTime = (progress.value / 100) * currentAudio.duration;
            }
        });

        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins}:${secs < 10 ? '0' : ''}${secs}`;
        }
    </script>
</body>
</html>
